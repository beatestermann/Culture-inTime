  <% if @properties_with_labels.present? %>

<div class="ui divider"></div>
<div class="meta">

<% prop = '' %>
<% JSON.parse(@properties_with_labels)["results"]["bindings"].each do |line| %>

 <% if prop !=  line.dig('label','value') %>
    <h2 title='<%= line.dig('p','value') %>'>
            <%= line.dig('label','value')  if  line.dig('label','value') %>
            <% prop = line.dig('label','value') %>
    </h2>
    <% end %>
    <% if line.dig('o','type') != 'literal' %>
        <a href='<%= line.dig('o','value') %>'><%= line.dig('o','value').split('/').last %></a>
         <% if line.dig('o_label','value') %>
        <a href='?uri=<%= line.dig('o','value') %>'>link</a>
        <% end %>
        <%= line.dig('o_label','value') unless line.dig('o_label','value')  == line.dig('o','value').split('/').last %>
         <%= "@" + line.dig('o_label','xml:lang') if line.dig('o_label','xml:lang') %>
    <% else %>
        <%= line.dig('o','value')  %>
        <%= "@" + line.dig('o','xml:lang') if line.dig('o','xml:lang') %>
    <% end %>
  <br> 
<% end %>

<% end %>

 

